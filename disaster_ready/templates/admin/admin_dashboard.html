{% extends "base.html" %} 

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block title %}Admin Dashboard{% endblock %} {%
block content %}
<h1>Admin Dashboard</h1>

<div class="dashboard-header">
  <h2>Platform Overview</h2>
  <p>Average Readiness Score: <strong>{{ avg_score }}%</strong></p>
</div>

<div class="chart-container">
  <canvas id="rolesChart"></canvas>
</div>

<h2>Users</h2>
<table class="user-table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <th>Readiness Score</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user.name }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.role }}</td>
      <td>{{ user.score }}%</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<script>
  const rolesCount = {{ roles_count|tojson }};
</script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
